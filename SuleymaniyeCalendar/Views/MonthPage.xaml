<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SuleymaniyeCalendar.Views.MonthPage"
             xmlns:localization="clr-namespace:LocalizationResourceManager.Maui;assembly=LocalizationResourceManager.Maui"
             xmlns:viewModels="clr-namespace:SuleymaniyeCalendar.ViewModels"
             Title="{Binding Title}" x:DataType="viewModels:MonthViewModel">

<ContentPage.Content>
    <Grid RowDefinitions="*,Auto" Padding="16,8,16,16" RowSpacing="16">

        <!-- Lightweight host; we will inject the heavy table after first frame -->
        <ContentView x:Name="ListHost" Grid.Row="0" />

        <!-- Loading Indicator -->
        <Grid Grid.Row="0" IsVisible="{Binding IsBusy}" InputTransparent="True">
            <Border Style="{StaticResource Card}" 
                    VerticalOptions="Center" 
                    HorizontalOptions="Center"
                    Padding="40,24">
                <VerticalStackLayout Spacing="16" HorizontalOptions="Center">
                    <ActivityIndicator IsRunning="True"
                                       Color="{StaticResource PrimaryColor}"
                                       HeightRequest="48"
                                       WidthRequest="48" />
                    <Label Text="{localization:Translate IcerikYukleniyor}"
                           Style="{StaticResource TitleMediumLabel}"
                           HorizontalTextAlignment="Center"
                           TextColor="{StaticResource PrimaryColor}" />
                </VerticalStackLayout>
            </Border>
        </Grid>

        <!-- Action Buttons -->
        <Grid Grid.Row="1" ColumnDefinitions="*,*" ColumnSpacing="12">
            <Button Grid.Column="0"
                    Text="{localization:Translate Kapat}" 
                    Command="{Binding GoBackCommand}" 
                    Style="{StaticResource TonalButton}" />
            <Button Grid.Column="1"
                    Text="{localization:Translate KonumYenileButton}" 
                    Command="{Binding RefreshCommand}" 
                    Style="{StaticResource PrimaryButton}"
                    IsEnabled="{Binding IsNotBusy}" />
        </Grid>
    </Grid>
</ContentPage.Content>

</ContentPage>