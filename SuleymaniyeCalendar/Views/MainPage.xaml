<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="SuleymaniyeCalendar.Views.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:localization="clr-namespace:LocalizationResourceManager.Maui;assembly=LocalizationResourceManager.Maui"
    xmlns:models="clr-namespace:SuleymaniyeCalendar.Models"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:viewModels="clr-namespace:SuleymaniyeCalendar.ViewModels"
    x:Name="MainPageRoot"
    Title="{Binding Title}"
    x:DataType="viewModels:MainViewModel"
    FlowDirection="{DynamicResource FlowDirection}"
    Background="{AppThemeBinding Light={StaticResource AppBackgroundLight}, Dark={StaticResource AppBackgroundDark}}">

    <Shell.TitleView>
        <Grid Margin="8,0,0,0" x:DataType="viewModels:MainViewModel" MinimumHeightRequest="48"
              ColumnDefinitions="*,Auto,Auto" ColumnSpacing="4">
            <Label Grid.Column="0"
                   AutomationProperties.IsInAccessibleTree="True"
                   SemanticProperties.Description="{localization:Translate Takvim}"
                   SemanticProperties.HeadingLevel="Level1"
                   Style="{StaticResource LabelSectionHeader}"
                   Text="{localization:Translate PageTitle}"
                   LineBreakMode="TailTruncation"
                   HorizontalTextAlignment="Start" />
            <Image Grid.Column="1"
                   x:DataType="viewModels:MainViewModel"
                   Margin="0,0,4,0"
                   AutomationProperties.IsInAccessibleTree="True"
                   VerticalOptions="Center"
                   WidthRequest="40"
                   HeightRequest="40"
                   SemanticProperties.Description="{localization:Translate UygulamaAyarlari}">
                <Image.Source>
                    <FontImageSource
                        FontAutoScalingEnabled="True"
                        FontFamily="{StaticResource IconFontFamily}"
                        Glyph="&#xf013;"
                        Size="22"
                        Color="{AppThemeBinding Light=White, Dark={StaticResource OnSurfaceColorDark}}" />
                </Image.Source>
                <Image.GestureRecognizers>
                    <TapGestureRecognizer x:DataType="viewModels:MainViewModel" Command="{Binding SettingsCommand}" NumberOfTapsRequired="1" />
                </Image.GestureRecognizers>
            </Image>
            <Image Grid.Column="2"
                   x:DataType="viewModels:MainViewModel"
                   Margin="4,0,8,0"
                   AutomationProperties.IsInAccessibleTree="True"
                   VerticalOptions="Center"
                   WidthRequest="40"
                   HeightRequest="40"
                   SemanticProperties.Description="{localization:Translate Yenile}">
                <Image.Source>
                    <FontImageSource
                        FontFamily="{StaticResource IconFontFamily}"
                        Glyph="&#xf2f1;"
                        Size="22"
                        Color="{AppThemeBinding Light=White, Dark={StaticResource OnSurfaceColorDark}}" />
                </Image.Source>
                <Image.GestureRecognizers>
                    <TapGestureRecognizer x:DataType="viewModels:MainViewModel" Command="{Binding RefreshLocationCommand}" NumberOfTapsRequired="1" />
                </Image.GestureRecognizers>
            </Image>
        </Grid>
    </Shell.TitleView>

    <ContentPage.Content>
        <!--<RefreshView Command="{Binding RefreshLocationCommand}" IsRefreshing="{Binding IsRefreshing}">-->
            <Grid ColumnDefinitions="*" RowDefinitions="*" HorizontalOptions="Fill" Margin="0" Padding="0" >
                <CollectionView
                    x:Name="PrayersView"
                    HorizontalOptions="Center"
                    ItemsSource="{Binding Prayers}"
                    SelectedItem="{Binding SelectedPrayer, Mode=TwoWay}"
                    SelectionChangedCommand="{Binding PrayerSelectedCommand}"
                    SelectionMode="Single"
                    VerticalOptions="Fill"
                    VerticalScrollBarVisibility="Never">
                    <CollectionView.ItemsLayout>
                        <LinearItemsLayout ItemSpacing="0" Orientation="Vertical" />
                    </CollectionView.ItemsLayout>
                    <CollectionView.Header>
                        <StackLayout x:DataType="viewModels:MainViewModel">
                            <!-- Remaining Time Card -->
                            <Border
                                Style="{StaticResource GlassCardOptimized}"
                                Margin="12,8"
                                Padding="0"
                                HorizontalOptions="Fill">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                                        <!-- Remaining time portion -->
                                        <GradientStop Color="{AppThemeBinding Light=#E8B08A, Dark=#C0885511}" Offset="0" />
                                        <GradientStop Color="{AppThemeBinding Light=#E8B08A, Dark=#C0664410}" Offset="{Binding TimeProgress}" />
                                        <!-- Sharp transition zone (clear boundary) -->
                                        <GradientStop Color="{AppThemeBinding Light=#DC925E, Dark=#40775520}" Offset="{Binding TimeProgress}" />
                                        <!-- Consumed time portion -->
                                        <GradientStop Color="{AppThemeBinding Light=#DC925E, Dark=#20443308}" Offset="1" />
                                    </LinearGradientBrush>
                                </Border.Background>

                                <Grid ColumnDefinitions="Auto,*" ColumnSpacing="8" Padding="12,10">
                                    <!-- Clock icon -->
                                    <Border
                                        Grid.Column="0"
                                        FontFamily="{StaticResource IconFontFamily}"
                                        FontSize="22"
                                        Text="&#xf017;"
                                        TextColor="{AppThemeBinding Light={StaticResource Primary50}, Dark={StaticResource Primary40}}"
                                        VerticalOptions="Center"
                                        WidthRequest="44"
                                        HeightRequest="44"
                                        Background="{AppThemeBinding Light={StaticResource SurfaceContainerLowestLight}, Dark={StaticResource SurfaceContainerDark}}"
                                        StrokeShape="RoundRectangle 22"
                                        VerticalOptions="Center">
                                        <Label
                                            FontFamily="{StaticResource IconFontFamily}"
                                            FontSize="24"
                                            Text="&#xf017;"
                                            TextColor="{AppThemeBinding Light={StaticResource Primary50}, Dark=#D0FFD700}"
                                            VerticalOptions="Center"
                                            HorizontalTextAlignment="Center" />
                                    </Border>

                                    <Label
                                        Grid.Column="1"
                                        AutomationProperties.IsInAccessibleTree="True"
                                        Style="{StaticResource BodyLargeStyle}"
                                        Text="{Binding RemainingTime}"
                                        VerticalOptions="Center" />
                                </Grid>
                            </Border>
                        </StackLayout>
                    </CollectionView.Header>

                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="models:Prayer">
                            <ContentView Padding="0">
                                <ContentView.Triggers>
                                    <!-- Past prayers: compact -->
                                    <DataTrigger Binding="{Binding IsPast}" TargetType="ContentView" Value="True">
                                        <Setter Property="Margin" Value="8,0,8,0" />
                                    </DataTrigger>
                                    <!-- Current prayer: generous -->
                                    <DataTrigger Binding="{Binding IsActive}" TargetType="ContentView" Value="True">
                                        <Setter Property="Margin" Value="10,4,10,4" />
                                    </DataTrigger>
                                    <!-- Standard margin for upcoming prayers -->
                                    <MultiTrigger TargetType="ContentView">
                                        <MultiTrigger.Conditions>
                                            <BindingCondition Binding="{Binding IsActive}" Value="False" />
                                            <BindingCondition Binding="{Binding IsPast}" Value="False" />
                                        </MultiTrigger.Conditions>
                                        <Setter Property="Margin" Value="10,2,10,2" />
                                    </MultiTrigger>
                                </ContentView.Triggers>
                                <Grid>
                                    <Border Style="{StaticResource FrostGlassCardCrystal}">
                                        <Border.Triggers>
                                            <!-- Past prayer style -->
                                            <DataTrigger Binding="{Binding IsPast}" TargetType="Border" Value="True">
                                                <Setter Property="Background" Value="{AppThemeBinding Light={StaticResource PrayerPastBackgroundColor}, Dark={StaticResource PrayerPastBackgroundColorDark}}" />
                                                <Setter Property="Stroke" Value="#40A8896F" />
                                                <Setter Property="StrokeThickness" Value="0.7" />
                                                <Setter Property="Opacity" Value="0.9" />
                                                <Setter Property="MinimumHeightRequest" Value="52" />
                                                <Setter Property="Padding" Value="8,3" />
                                            </DataTrigger>
                                            <!-- Current prayer style -->
                                            <DataTrigger Binding="{Binding IsActive}" TargetType="Border" Value="True">
                                                <Setter Property="Background" Value="{AppThemeBinding Light={StaticResource SurfaceContainerLowestLight}, Dark={StaticResource SurfaceContainerLowestDark}}"/>
                                                <Setter Property="Shadow">
                                                    <Shadow Brush="{AppThemeBinding Light={StaticResource Secondary20}, Dark=#50FFA500}" Radius="32" Offset="0,12" Opacity="0.05" />
                                                </Setter>
                                                <Setter Property="MinimumHeightRequest" Value="100" />
                                                <Setter Property="Padding" Value="10,6" />
                                            </DataTrigger>
                                            <!-- Upcoming prayer style -->
                                            <MultiTrigger TargetType="Border">
                                                <MultiTrigger.Conditions>
                                                    <BindingCondition Binding="{Binding IsActive}" Value="False" />
                                                    <BindingCondition Binding="{Binding IsPast}" Value="False" />
                                                </MultiTrigger.Conditions>
                                                <Setter Property="Background" Value="{AppThemeBinding Light={StaticResource GlassStrongLight}, Dark={StaticResource GlassStrongDark}}"/>
                                                <Setter Property="Opacity" Value="0.98" />
                                                <Setter Property="Shadow">
                                                    <Shadow Brush="{AppThemeBinding Light={StaticResource Secondary30}, Dark=#30FFA500}" Radius="3" Offset="0,0" Opacity="0.95" />
                                                </Setter>
                                            </MultiTrigger>
                                        </Border.Triggers>

                                        <Grid ColumnDefinitions="Auto,*,Auto,Auto" ColumnSpacing="6">

                                            <!-- Prayer Icon -->
                                            <Border Grid.Column="0" WidthRequest="38" HeightRequest="38"
                                                    Style="{StaticResource LuminousCircularIcon}"
                                                    BackgroundColor="Transparent"
                                                    Background="{StaticResource Secondary80}"
                                                    Stroke="{StaticResource GlassStrokeBrush}"
                                                    VerticalOptions="Center">
                                                <Border.Triggers>
                                                    <!-- Past: compact -->
                                                    <DataTrigger Binding="{Binding IsPast}" TargetType="Border" Value="True">
                                                        <Setter Property="WidthRequest" Value="28" />
                                                        <Setter Property="HeightRequest" Value="28" />
                                                        <Setter Property="Opacity" Value="0.7" />
                                                    </DataTrigger>
                                                    <!-- Current: enhanced but compact -->
                                                    <DataTrigger Binding="{Binding IsActive}" TargetType="Border" Value="True">
                                                        <!-- <Setter Property="Background" Value="{StaticResource Primary30}" /> -->
                                                        <Setter Property="WidthRequest" Value="46" />
                                                        <Setter Property="HeightRequest" Value="46" />
                                                        <Setter Property="Shadow">
                                                            <Shadow Brush="{StaticResource Primary50}" Radius="12" Offset="0,3" Opacity="0.1" />
                                                        </Setter>
                                                    </DataTrigger>
                                                </Border.Triggers>
                                                <Image Source="{Binding IconPath}" Aspect="AspectFit"
                                                       WidthRequest="32" HeightRequest="32"
                                                       VerticalOptions="Center" HorizontalOptions="Center">
                                                    <Image.Triggers>
                                                        <!-- Past: smaller -->
                                                        <DataTrigger Binding="{Binding IsPast}" TargetType="Image" Value="True">
                                                            <Setter Property="WidthRequest" Value="20" />
                                                            <Setter Property="HeightRequest" Value="20" />
                                                            <Setter Property="Opacity" Value="{AppThemeBinding Light=0.6, Dark=0.55}" />
                                                        </DataTrigger>
                                                        <!-- Current: larger but proportional -->
                                                        <DataTrigger Binding="{Binding IsActive}" TargetType="Image" Value="True">
                                                            <Setter Property="Opacity" Value="1.0" />
                                                            <Setter Property="Scale" Value="1.2" />
                                                            <Setter Property="WidthRequest" Value="36" />
                                                            <Setter Property="HeightRequest" Value="36" />
                                                        </DataTrigger>
                                                        <!-- Upcoming prayers: High visibility in both modes -->
                                                        <MultiTrigger TargetType="Image">
                                                            <MultiTrigger.Conditions>
                                                                <BindingCondition Binding="{Binding IsActive}" Value="False" />
                                                                <BindingCondition Binding="{Binding IsPast}" Value="False" />
                                                            </MultiTrigger.Conditions>
                                                            <Setter Property="Opacity" Value="{AppThemeBinding Light=0.95, Dark=0.85}" />
                                                        </MultiTrigger>
                                                    </Image.Triggers>
                                                </Image>
                                            </Border>

                                            <!-- Prayer Name -->
                                            <Label Grid.Column="1" Style="{StaticResource PrayerNameStyle}" Text="{Binding Name}" VerticalOptions="Center">
                                                <Label.Triggers>
                                                    <!-- Past -->
                                                    <DataTrigger Binding="{Binding IsPast}" TargetType="Label" Value="True">
                                                        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource PrayerPastTextColor}, Dark={StaticResource PrayerPastTextColorDark}}" />
                                                        <Setter Property="FontSize" Value="{DynamicResource BodySmallFontSize}" />
                                                        <Setter Property="Opacity" Value="0.9" />
                                                    </DataTrigger>
                                                    <!-- Current -->
                                                    <DataTrigger Binding="{Binding IsActive}" TargetType="Label" Value="True">
                                                        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource PrayerActiveTextColor}, Dark={StaticResource PrayerActiveTextColorDark}}" />
                                                        <Setter Property="FontAttributes" Value="Bold" />
                                                        <Setter Property="FontSize" Value="{DynamicResource TitleFontSize}" />
                                                        <Setter Property="CharacterSpacing" Value="0.5" />
                                                    </DataTrigger>
                                                    <MultiTrigger TargetType="Label">
                                                        <MultiTrigger.Conditions>
                                                            <BindingCondition Binding="{Binding IsActive}" Value="False" />
                                                            <BindingCondition Binding="{Binding IsPast}" Value="False" />
                                                        </MultiTrigger.Conditions>
                                                        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource PrayerUpcomingTextColor}, Dark={StaticResource PrayerUpcomingTextColorDark}}" />
                                                    </MultiTrigger>
                                                </Label.Triggers>
                                            </Label>

                                            <!-- Prayer Time -->
                                            <Label Grid.Column="2" HorizontalTextAlignment="End"
                                                   Style="{StaticResource PrayerTimeStyle}" Text="{Binding Time}"
                                                   VerticalOptions="Center">
                                                <Label.Triggers>
                                                    <!-- Past -->
                                                    <DataTrigger Binding="{Binding IsPast}" TargetType="Label" Value="True">
                                                        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource PrayerPastTextColor}, Dark={StaticResource PrayerPastTextColorDark}}" />
                                                        <Setter Property="FontSize" Value="{DynamicResource BodySmallFontSize}" />
                                                        <Setter Property="Opacity" Value="0.9" />
                                                    </DataTrigger>
                                                    <!-- Current -->
                                                    <DataTrigger Binding="{Binding IsActive}" TargetType="Label" Value="True">
                                                        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource PrayerActiveTextColor}, Dark={StaticResource PrayerActiveTextColorDark}}" />
                                                        <Setter Property="FontAttributes" Value="Bold" />
                                                        <Setter Property="FontSize" Value="{DynamicResource TitleFontSize}" />
                                                        <Setter Property="CharacterSpacing" Value="0.5" />
                                                    </DataTrigger>
                                                    <MultiTrigger TargetType="Label">
                                                        <MultiTrigger.Conditions>
                                                            <BindingCondition Binding="{Binding IsActive}" Value="False" />
                                                            <BindingCondition Binding="{Binding IsPast}" Value="False" />
                                                        </MultiTrigger.Conditions>
                                                        <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource PrayerUpcomingTextColor}, Dark={StaticResource PrayerUpcomingTextColorDark}}" />
                                                    </MultiTrigger>
                                                </Label.Triggers>
                                            </Label>

                                            <!-- Notification Bell -->
                                            <Border Grid.Column="3" BackgroundColor="Transparent"
                                                    Background="{AppThemeBinding Light={StaticResource SurfaceGlassBrushLight}, Dark={StaticResource SurfaceGlassBrushDark}}"
                                                    Stroke="{StaticResource GlassStrokeBrush}" StrokeThickness="0.75"
                                                    StrokeShape="RoundRectangle 16" WidthRequest="38" HeightRequest="38"
                                                    VerticalOptions="Center">
                                                <Label
                                                AutomationProperties.IsInAccessibleTree="True"
                                                FontFamily="{StaticResource IconFontFamily}"
                                                FontSize="{DynamicResource IconMediumFontSize}"
                                                HorizontalOptions="Center"
                                                VerticalOptions="Center"
                                                Text="&#xe7f6;"
                                                TextColor="{AppThemeBinding Light={StaticResource HighContrastOnSurface}, Dark={StaticResource HighContrastOnSurfaceDark}}">
                                                    <Label.Triggers>
                                                        <DataTrigger Binding="{Binding Enabled}" TargetType="Label" Value="False">
                                                            <Setter Property="Text" Value="&#xf1f6;" />
                                                            <Setter Property="SemanticProperties.Description" Value="{localization:Translate DevreDisi}" />
                                                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource HighContrastOutline}, Dark={StaticResource HighContrastOutlineDark}}" />
                                                            <Setter Property="Opacity" Value="0.6" />
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Enabled}" TargetType="Label" Value="True">
                                                            <Setter Property="Text" Value="&#xf0f3;" />
                                                            <Setter Property="SemanticProperties.Description" Value="{localization:Translate Etkin}" />
                                                            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Primary60}, Dark={StaticResource Primary30}}" />
                                                            <Setter Property="Opacity" Value="1.0" />
                                                        </DataTrigger>
                                                        <!-- Enabled current -->
                                                        <MultiTrigger TargetType="Label">
                                                            <MultiTrigger.Conditions>
                                                                <BindingCondition Binding="{Binding IsActive}" Value="True" />
                                                                <BindingCondition Binding="{Binding Enabled}" Value="True" />
                                                            </MultiTrigger.Conditions>
                                                            <Setter Property="TextColor" Value="{StaticResource Primary50}" />
                                                            <Setter Property="Scale" Value="1.1" />
                                                        </MultiTrigger>
                                                    </Label.Triggers>
                                                </Label>
                                                <Border.GestureRecognizers>
                                                    <TapGestureRecognizer x:DataType="models:Prayer"
                                                    Command="{Binding NavigateCommand}" />
                                                </Border.GestureRecognizers>
                                                <Border.Triggers>
                                                    <DataTrigger Binding="{Binding Enabled}" TargetType="Border" Value="True">
                                                        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource Primary10}, Dark={StaticResource Primary95}}" />
                                                        <Setter Property="Stroke" Value="{AppThemeBinding Light={StaticResource Primary40}, Dark={StaticResource Primary60}}" />
                                                        <Setter Property="StrokeThickness" Value="1.25" />
                                                    </DataTrigger>
                                                    <!-- Enabled current -->
                                                    <MultiTrigger TargetType="Border">
                                                        <MultiTrigger.Conditions>
                                                            <BindingCondition Binding="{Binding IsActive}" Value="True" />
                                                            <BindingCondition Binding="{Binding Enabled}" Value="True" />
                                                        </MultiTrigger.Conditions>
                                                        <Setter Property="Background" Value="{StaticResource Amber30}" />
                                                        <Setter Property="Stroke" Value="{StaticResource Primary50}" />
                                                        <Setter Property="StrokeThickness" Value="1.5" />
                                                    </MultiTrigger>
                                                    <DataTrigger Binding="{Binding Enabled}" TargetType="Border" Value="False">
                                                        <Setter Property="Stroke" Value="{StaticResource GlassStrokeBrush}" />
                                                        <Setter Property="StrokeThickness" Value="0.75" />
                                                    </DataTrigger>
                                                </Border.Triggers>
                                            </Border>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </ContentView>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>

                    <CollectionView.Footer>
                        <StackLayout x:DataType="viewModels:MainViewModel" Orientation="Vertical" Spacing="{StaticResource SpacingTight}" Margin="0,4,0,4">
                            <!-- Monthly Calendar Button -->
                            <Button
                                Margin="32,0,32,0"
                                Style="{StaticResource GlassButtonPillSecondary}"
                                Text="{localization:Translate AylikTakvim}"
                                Command="{Binding GoToMonthCommand}"
                                HorizontalOptions="Fill"
                                IsEnabled="{Binding IsNotBusy}">
                                <Button.ImageSource>
                                    <FontImageSource
                                        FontFamily="{StaticResource IconFontFamily}"
                                        Glyph="&#xf073;"
                                        Size="{DynamicResource IconMediumFontSize}"
                                        Color="{AppThemeBinding Light={StaticResource CardValueLight}, Dark={StaticResource Primary30}}" />
                                </Button.ImageSource>
                            </Button>

                            <!-- City Location Card -->
                            <Border
                                Margin="32,0,32,8"
                                HorizontalOptions="Fill"
                                IsEnabled="{Binding IsNotBusy}"
                                Style="{StaticResource GlassCardSecondaryTint}"
                                StrokeShape="RoundRectangle 22">
                                <Label
                                    Margin="3,0"
                                    Padding="0"
                                    x:DataType="viewModels:MainViewModel"
                                    AutomationProperties.IsInAccessibleTree="True"
                                    HorizontalOptions="Center"
                                    SemanticProperties.Description="{localization:Translate Sehir}"
                                    Style="{StaticResource LocationStyle}"
                                    VerticalTextAlignment="Center">
                                    <Label.FormattedText>
                                        <FormattedString>
                                            <Span
                                                FontFamily="{StaticResource IconFontFamily}"
                                                FontSize="{DynamicResource IconMediumFontSize}"
                                                Text="&#xf3c5; " />
                                            <Span Text="{Binding City}" TextTransform="Uppercase" />
                                        </FormattedString>
                                    </Label.FormattedText>
                                </Label>
                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding GoToMapCommand}" NumberOfTapsRequired="1" />
                                </Border.GestureRecognizers>
                            </Border>
                        </StackLayout>
                    </CollectionView.Footer>
                </CollectionView>

                <ActivityIndicator IsRunning="{Binding IsBusy}" 
                                   IsVisible="{Binding IsBusy}"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center"
                                   Color="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource PrimaryColor}}"
                                   HeightRequest="80"
                                   WidthRequest="80" />

                <!-- Loading overlay -->
                <Grid IsVisible="{Binding ShowOverlay}" BackgroundColor="#80000000">
                    <Border Style="{StaticResource FrostGlassCardCrystal}" Padding="32,20" HorizontalOptions="Center" VerticalOptions="Center">
                        <VerticalStackLayout Spacing="12" HorizontalOptions="Center">
                            <ActivityIndicator IsRunning="True" Color="{AppThemeBinding Light={StaticResource Primary60}, Dark={StaticResource Primary40}}" WidthRequest="80" HeightRequest="80" />
                            <Label Text="{Binding OverlayMessage}" Style="{StaticResource BodyLargeStyle}" HorizontalTextAlignment="Center" />
                        </VerticalStackLayout>
                    </Border>
                </Grid>
            </Grid>
        <!--</RefreshView>-->
    </ContentPage.Content>
</ContentPage>
