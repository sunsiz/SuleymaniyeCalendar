<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="SuleymaniyeCalendar.Views.CompassPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:localization="clr-namespace:LocalizationResourceManager.Maui;assembly=LocalizationResourceManager.Maui"
    xmlns:viewModels="clr-namespace:SuleymaniyeCalendar.ViewModels"
    Title="{Binding Title}"
    x:DataType="viewModels:CompassViewModel"
    FlowDirection="{DynamicResource FlowDirection}"
    Background="{AppThemeBinding Light={StaticResource AppBackgroundBrushLight}, Dark={StaticResource AppBackgroundBrushDark}}">

    <Shell.TitleView>
        <Grid
            Margin="10"
            ColumnDefinitions="*,Auto" ColumnSpacing="8"
            HeightRequest="40">
            <Label
                Grid.Column="0"
                FontSize="{DynamicResource HeaderFontSize}"
                AutomationProperties.IsInAccessibleTree="True"
                SemanticProperties.HeadingLevel="Level1"
                Style="{StaticResource LabelSectionHeader}"
                Text="{localization:Translate KibleGostergesi}"
                VerticalOptions="Start" />
            <ImageButton
                Grid.Column="1"
                Margin="10,0,12,0"
                AutomationProperties.IsInAccessibleTree="True"
                VerticalOptions="Center"
                Command="{Binding RefreshLocationCommand}"
                SemanticProperties.Description="{localization:Translate Yenile}">
                <ImageButton.Source>
                    <FontImageSource                        
                        FontAutoScalingEnabled="True"
                        FontFamily="{StaticResource IconFontFamily}"
                        Glyph="&#xf2f1;"
                        Size="{DynamicResource IconLargeFontSize}"
                        Color="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColorDark}}" />
                </ImageButton.Source>
            </ImageButton>
        </Grid>
    </Shell.TitleView>

    <ContentPage.Content>
        <Grid>
            <ScrollView>
                <VerticalStackLayout
                    Padding="{StaticResource PagePaddingMobile}"
                    BackgroundColor="{AppThemeBinding Light={StaticResource AppBackgroundColor},
                                                      Dark={StaticResource AppBackgroundColorDark}}"
                    Spacing="{StaticResource SpacingTight}">

                    <!--  Compass Section - Golden Hour ✨  -->
                    <Border Style="{StaticResource FrostGlassCardFrozen}">
                        <VerticalStackLayout Spacing="16">
                            <Label
                                HorizontalTextAlignment="Center"
                                Style="{StaticResource TitleLargeStyle}"
                                TextColor="{AppThemeBinding Light={StaticResource GoldPure}, Dark={StaticResource GoldMedium}}"
                                Text="{localization:Translate KibleGostergesi}" />

                            <Grid HeightRequest="260" HorizontalOptions="Center">
                                <Image
                                    x:Name="CompassImage"
                                    Aspect="AspectFit"
                                    HorizontalOptions="Center"
                                    Source="kompas.png"
                                    VerticalOptions="Center" />
                                <Image
                                    x:Name="ImageArrow"
                                    Aspect="AspectFit"
                                    HorizontalOptions="Center"
                                    Rotation="{Binding Heading}"
                                    Scale="0.72"
                                    Source="isaretci.png"
                                    VerticalOptions="Center" />
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!--  Location Information - Golden Hour ✨  -->
                    <Border Style="{StaticResource FrostGlassCardCrystal}">
                        <VerticalStackLayout Spacing="16">
                            <Label
                                HorizontalTextAlignment="Center"
                                Style="{StaticResource TitleLargeStyle}"
                                TextColor="{AppThemeBinding Light={StaticResource GoldPure}, Dark={StaticResource GoldMedium}}"
                                Text="{localization:Translate KonumBilgileri}" />

                            <!--  Coordinates Grid  -->
                            <Grid
                                ColumnDefinitions="*,*"
                                ColumnSpacing="10"
                                RowDefinitions="Auto,Auto,Auto"
                                RowSpacing="16">
                                <!--  Latitude - Golden ✨  -->
                                <VerticalStackLayout
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Spacing="4">
                                    <Label
                                        FontAttributes="Bold"
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource LabelLargeStyle}"
                                        Text="{localization:Translate EnlemFormatsiz}"
                                        TextColor="{AppThemeBinding Light={StaticResource GoldDeep},
                                                                    Dark={StaticResource GoldMedium}}" />
                                    <Label
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource BodyLargeStyle}"
                                        Text="{Binding Latitude, StringFormat='{0:F6}'}"
                                        TextColor="{AppThemeBinding Light={StaticResource OnSurfaceColor},
                                                                    Dark={StaticResource OnSurfaceColorDark}}" />
                                </VerticalStackLayout>

                                <!--  Longitude - Golden ✨  -->
                                <VerticalStackLayout
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Spacing="4">
                                    <Label
                                        FontAttributes="Bold"
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource LabelLargeStyle}"
                                        Text="{localization:Translate BoylamFormatsiz}"
                                        TextColor="{AppThemeBinding Light={StaticResource GoldDeep},
                                                                    Dark={StaticResource GoldMedium}}" />
                                    <Label
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource BodyLargeStyle}"
                                        Text="{Binding Longitude, StringFormat='{0:F6}'}"
                                        TextColor="{AppThemeBinding Light={StaticResource OnSurfaceColor},
                                                                    Dark={StaticResource OnSurfaceColorDark}}" />
                                </VerticalStackLayout>

                                <!--  Altitude - Golden ✨  -->
                                <VerticalStackLayout
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Spacing="4">
                                    <Label
                                        FontAttributes="Bold"
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource LabelLargeStyle}"
                                        Text="{localization:Translate YukseklikFormatsiz}"
                                        TextColor="{AppThemeBinding Light={StaticResource GoldDeep},
                                                                    Dark={StaticResource GoldMedium}}" />
                                    <Label
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource BodyLargeStyle}"
                                        Text="{Binding Altitude, StringFormat='{0:N0} m'}"
                                        TextColor="{AppThemeBinding Light={StaticResource OnSurfaceColor},
                                                                    Dark={StaticResource OnSurfaceColorDark}}" />
                                </VerticalStackLayout>

                                <!--  Heading - Golden ✨  -->
                                <VerticalStackLayout
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Spacing="4">
                                    <Label
                                        FontAttributes="Bold"
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource LabelLargeStyle}"
                                        Text="{localization:Translate Aci}"
                                        TextColor="{AppThemeBinding Light={StaticResource GoldDeep},
                                                                    Dark={StaticResource GoldMedium}}" />
                                    <Label
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource BodyLargeStyle}"
                                        Text="{Binding Heading, StringFormat='{0:F0}°'}"
                                        TextColor="{AppThemeBinding Light={StaticResource OnSurfaceColor},
                                                                    Dark={StaticResource OnSurfaceColorDark}}" />
                                </VerticalStackLayout>

                                <!--  Address - Golden ✨ spans both columns  -->
                                <VerticalStackLayout
                                    Grid.Row="2"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Spacing="4">
                                    <Label
                                        FontAttributes="Bold"
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource TitleMediumStyle}"
                                        Text="{localization:Translate Adres}"
                                        TextColor="{AppThemeBinding Light={StaticResource GoldDeep},
                                                                    Dark={StaticResource GoldMedium}}" />
                                    <Label
                                        HorizontalTextAlignment="Center"
                                        Style="{StaticResource BodyLargeStyle}"
                                        Text="{Binding Address}"
                                        TextColor="{AppThemeBinding Light={StaticResource OnSurfaceColor},
                                                                    Dark={StaticResource OnSurfaceColorDark}}" />
                                </VerticalStackLayout>
                            </Grid>

                            <!--  Action Button - Golden Glass ✨  -->
                            <Button
                                Margin="12,0,12,12"
                                Style="{StaticResource GlassButtonPillTertiary}"
                                TextColor="{AppThemeBinding Light={StaticResource GoldPure}, Dark={StaticResource GoldLight}}"
                                Command="{Binding GoToMapCommand}"
                                Text="{localization:Translate HaritadaGoster}" />
                        </VerticalStackLayout>
                    </Border>
                </VerticalStackLayout>
            </ScrollView>

            <!--  Busy overlay  -->
            <Grid BackgroundColor="{AppThemeBinding Light={StaticResource BusyOverlayColorDark}, Dark={StaticResource BusyOverlayColor}}" IsVisible="{Binding IsBusy}">
                <ActivityIndicator
                    Style="{StaticResource ActivityIndicator}"
                    HorizontalOptions="Center"
                    IsRunning="True"
                    VerticalOptions="Center"
                    Color="{StaticResource PrimaryColor}" />
            </Grid>
        </Grid>
    </ContentPage.Content>
</ContentPage>