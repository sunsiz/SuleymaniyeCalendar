<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="SuleymaniyeCalendar.Views.MonthTableView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:localization="clr-namespace:LocalizationResourceManager.Maui;assembly=LocalizationResourceManager.Maui"
    xmlns:models="clr-namespace:SuleymaniyeCalendar.Models"
    xmlns:viewModels="clr-namespace:SuleymaniyeCalendar.ViewModels"
    x:DataType="viewModels:MonthViewModel"
    FlowDirection="{DynamicResource FlowDirection}">

    <ScrollView Orientation="Both" HorizontalScrollBarVisibility="Always" VerticalScrollBarVisibility="Always">
        <CollectionView
            ItemsSource="{Binding MonthlyCalendar}"
            ItemSizingStrategy="MeasureFirstItem"
            SelectionMode="None"
            WidthRequest="600">

            <!-- Header Template -->
            <CollectionView.Header>
                <Grid Padding="8,4"
                      BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceVariant}, Dark={StaticResource SurfaceVariantDark}}"
                      ColumnDefinitions="100,60,60,60,60,60,60,60,60"
                      ColumnSpacing="4"
                      MinimumHeightRequest="48">
                    <Label Grid.Column="0" Style="{StaticResource TableHeaderLabel}" Text="{localization:Translate Tarih}" />
                    <Label Grid.Column="1" Style="{StaticResource TableHeaderLabel}" Text="{localization:Translate FecriKazip}" />
                    <Label Grid.Column="2" Style="{StaticResource TableHeaderLabel}" Text="{localization:Translate FecriSadik}" />
                    <Label Grid.Column="3" Style="{StaticResource TableHeaderLabel}" Text="{localization:Translate SabahSonu}" />
                    <Label Grid.Column="4" Style="{StaticResource TableHeaderLabel}" Text="{localization:Translate Ogle}" />
                    <Label Grid.Column="5" Style="{StaticResource TableHeaderLabel}" Text="{localization:Translate Ikindi}" />
                    <Label Grid.Column="6" Style="{StaticResource TableHeaderLabel}" Text="{localization:Translate Aksam}" />
                    <Label Grid.Column="7" Style="{StaticResource TableHeaderLabel}" Text="{localization:Translate Yatsi}" />
                    <Label Grid.Column="8" Style="{StaticResource TableHeaderLabel}" Text="{localization:Translate YatsiSonu}" />
                </Grid>
            </CollectionView.Header>

            <!-- Data Template -->
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Calendar">
                    <Grid Padding="8,4"
                          ColumnDefinitions="100,60,60,60,60,60,60,60,60"
                          ColumnSpacing="4"
                          MinimumHeightRequest="40">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup Name="CommonStates">
                                <VisualState Name="Normal" />
                                <VisualState Name="Selected">
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource PrimaryContainer}, Dark={StaticResource PrimaryContainerDark}}" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        
                        <Label Grid.Column="0" Style="{StaticResource TableCellLabel}" FontAttributes="Bold" Text="{Binding Date}" />
                        <Label Grid.Column="1" Style="{StaticResource TableCellLabel}" Text="{Binding FalseFajr}" />
                        <Label Grid.Column="2" Style="{StaticResource TableCellLabel}" FontAttributes="Bold" Text="{Binding Fajr}" />
                        <Label Grid.Column="3" Style="{StaticResource TableCellLabel}" Text="{Binding Sunrise}" />
                        <Label Grid.Column="4" Style="{StaticResource TableCellLabel}" FontAttributes="Bold" Text="{Binding Dhuhr}" />
                        <Label Grid.Column="5" Style="{StaticResource TableCellLabel}" Text="{Binding Asr}" />
                        <Label Grid.Column="6" Style="{StaticResource TableCellLabel}" FontAttributes="Bold" Text="{Binding Maghrib}" />
                        <Label Grid.Column="7" Style="{StaticResource TableCellLabel}" Text="{Binding Isha}" />
                        <Label Grid.Column="8" Style="{StaticResource TableCellLabel}" FontAttributes="Bold" Text="{Binding EndOfIsha}" />
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
            
            <CollectionView.Footer>
                <BoxView HeightRequest="16" />
            </CollectionView.Footer>
            
        </CollectionView>
    </ScrollView>
</ContentView>