<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="SuleymaniyeCalendar.Views.MonthTableView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:localization="clr-namespace:LocalizationResourceManager.Maui;assembly=LocalizationResourceManager.Maui"
    xmlns:models="clr-namespace:SuleymaniyeCalendar.Models"
       xmlns:viewModels="clr-namespace:SuleymaniyeCalendar.ViewModels"
       x:DataType="viewModels:MonthViewModel"
    FlowDirection="{DynamicResource FlowDirection}">
    
    <!-- Horizontal scroll containing the CollectionView for both directions -->
    <ScrollView Orientation="Horizontal" HorizontalScrollBarVisibility="Always">
       <CollectionView
            ItemsSource="{Binding MonthlyCalendar}"
            ItemsLayout="VerticalList"
            ItemSizingStrategy="MeasureFirstItem"
            SelectionMode="None"
            VerticalOptions="Fill"
            VerticalScrollBarVisibility="Always"
            WidthRequest="562">
            
            <!-- Header Template -->
            <CollectionView.Header>
                <Border BackgroundColor="{AppThemeBinding Light={StaticResource PrimaryColor},
                                                          Dark={StaticResource Primary80}}"
                        Stroke="Transparent"
                        StrokeShape="RoundRectangle 8,8,0,0"
                        Margin="0,0,0,0">
                    <Grid Padding="4,3"
                          ColumnDefinitions="80,60,60,60,60,60,60,60,62"
                          ColumnSpacing="0"
                          WidthRequest="562"
                          MinimumHeightRequest="48">
                        <Label Grid.Column="0" FontAttributes="Bold" HorizontalTextAlignment="Center"
                               Text="{localization:Translate Tarih}" TextColor="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColor}}" VerticalTextAlignment="Center" 
                               FontSize="{DynamicResource CaptionFontSize}"
                               AutomationProperties.IsInAccessibleTree="True"
                               SemanticProperties.Description="{localization:Translate Tarih}" />
                        <Label Grid.Column="1" FontAttributes="Bold" HorizontalTextAlignment="Center"
                               Text="{localization:Translate FecriKazip}" TextColor="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColor}}" VerticalTextAlignment="Center"
                               FontSize="{DynamicResource CaptionFontSize}"
                               AutomationProperties.IsInAccessibleTree="True"
                               SemanticProperties.Description="{localization:Translate FecriKazip}" />
                        <Label Grid.Column="2" FontAttributes="Bold" HorizontalTextAlignment="Center"
                               Text="{localization:Translate FecriSadik}" TextColor="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColor}}" VerticalTextAlignment="Center"
                               FontSize="{DynamicResource CaptionFontSize}"
                               AutomationProperties.IsInAccessibleTree="True"
                               SemanticProperties.Description="{localization:Translate FecriSadik}" />
                        <Label Grid.Column="3" FontAttributes="Bold" HorizontalTextAlignment="Center"
                               Text="{localization:Translate SabahSonu}" TextColor="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColor}}" VerticalTextAlignment="Center"
                               FontSize="{DynamicResource CaptionFontSize}"
                               AutomationProperties.IsInAccessibleTree="True"
                               SemanticProperties.Description="{localization:Translate SabahSonu}" />
                        <Label Grid.Column="4" FontAttributes="Bold" HorizontalTextAlignment="Center"
                               Text="{localization:Translate Ogle}" TextColor="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColor}}" VerticalTextAlignment="Center"
                               FontSize="{DynamicResource CaptionFontSize}"
                               AutomationProperties.IsInAccessibleTree="True"
                               SemanticProperties.Description="{localization:Translate Ogle}" />
                        <Label Grid.Column="5" FontAttributes="Bold" HorizontalTextAlignment="Center"
                               Text="{localization:Translate Ikindi}" TextColor="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColor}}" VerticalTextAlignment="Center"
                               FontSize="{DynamicResource CaptionFontSize}"
                               AutomationProperties.IsInAccessibleTree="True"
                               SemanticProperties.Description="{localization:Translate Ikindi}" />
                        <Label Grid.Column="6" FontAttributes="Bold" HorizontalTextAlignment="Center"
                               Text="{localization:Translate Aksam}" TextColor="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColor}}" VerticalTextAlignment="Center"
                               FontSize="{DynamicResource CaptionFontSize}"
                               AutomationProperties.IsInAccessibleTree="True"
                               SemanticProperties.Description="{localization:Translate Aksam}" />
                        <Label Grid.Column="7" FontAttributes="Bold" HorizontalTextAlignment="Center"
                               Text="{localization:Translate Yatsi}" TextColor="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColor}}" VerticalTextAlignment="Center"
                               FontSize="{DynamicResource CaptionFontSize}"
                               AutomationProperties.IsInAccessibleTree="True"
                               SemanticProperties.Description="{localization:Translate Yatsi}" />
                        <Label Grid.Column="8" FontAttributes="Bold" HorizontalTextAlignment="Center"
                               Text="{localization:Translate YatsiSonu}" TextColor="{AppThemeBinding Light={StaticResource OnPrimaryColor}, Dark={StaticResource OnPrimaryColor}}" VerticalTextAlignment="Center"
                               FontSize="{DynamicResource CaptionFontSize}"
                               AutomationProperties.IsInAccessibleTree="True"
                               SemanticProperties.Description="{localization:Translate YatsiSonu}" />
                    </Grid>
                </Border>
            </CollectionView.Header>
            
            <!-- Data Template with Clean Table Design -->
                     <CollectionView.ItemTemplate>
                            <DataTemplate x:DataType="models:Calendar">
                  <Border BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceColor}, Dark={StaticResource SurfaceColorDark}}"
                            Stroke="{AppThemeBinding Light={StaticResource OutlineColor}, Dark={StaticResource OutlineColorDark}}"
                            StrokeThickness="0.5"
                            Margin="0">
                        <Grid Padding="0"
                              ColumnDefinitions="80,60,60,60,60,60,60,60,62"
                              ColumnSpacing="0" RowSpacing="0"
                              WidthRequest="562"
                              MinimumHeightRequest="10">
                            
                            <!-- Date Column -->
                         <Border Grid.Column="0" 
                                BackgroundColor="{AppThemeBinding Light={StaticResource Primary10}, Dark={StaticResource SurfaceVariantDark}}"
                                StrokeShape="RoundRectangle 4"
                                Stroke="{AppThemeBinding Light={StaticResource Primary40}, Dark={StaticResource Primary60}}"
                                StrokeThickness="1" Margin="1"
                                Padding="0">
                                <Label FontAttributes="Bold" HorizontalTextAlignment="Center"
                                       Text="{Binding Date}" 
                                   TextColor="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource Primary30}}"
                                       VerticalTextAlignment="Center" 
                                       FontSize="{DynamicResource CaptionFontSize}"
                                       AutomationProperties.IsInAccessibleTree="True"
                                       SemanticProperties.Description="{Binding Date}" />
                            </Border>
                            <Label Grid.Column="1" HorizontalTextAlignment="Center"
                                   Text="{Binding FalseFajr}" VerticalTextAlignment="Center" 
                                   FontSize="{DynamicResource CaptionFontSize}"
                                   TextColor="{AppThemeBinding Light={StaticResource OnSurfaceColor}, Dark={StaticResource OnSurfaceColorDark}}"
                                   AutomationProperties.IsInAccessibleTree="True"
                                   SemanticProperties.Description="{Binding FalseFajr}" />
                            <Label Grid.Column="2" FontAttributes="Bold" HorizontalTextAlignment="Center"
                                   Text="{Binding Fajr}" VerticalTextAlignment="Center" 
                                   FontSize="{DynamicResource CaptionFontSize}"
                                   TextColor="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource Primary30}}"
                                   AutomationProperties.IsInAccessibleTree="True"
                                   SemanticProperties.Description="{Binding Fajr}" />
                            <Label Grid.Column="3" HorizontalTextAlignment="Center"
                                   Text="{Binding Sunrise}" VerticalTextAlignment="Center" 
                                   FontSize="{DynamicResource CaptionFontSize}"
                                   TextColor="{AppThemeBinding Light={StaticResource OnSurfaceColor}, Dark={StaticResource OnSurfaceColorDark}}"
                                   AutomationProperties.IsInAccessibleTree="True"
                                   SemanticProperties.Description="{Binding Sunrise}" />
                            <Label Grid.Column="4" FontAttributes="Bold" HorizontalTextAlignment="Center"
                                   Text="{Binding Dhuhr}" VerticalTextAlignment="Center" 
                                   FontSize="{DynamicResource CaptionFontSize}"
                                   TextColor="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource Primary30}}"
                                   AutomationProperties.IsInAccessibleTree="True"
                                   SemanticProperties.Description="{Binding Dhuhr}" />
                            <Label Grid.Column="5" HorizontalTextAlignment="Center"
                                   Text="{Binding Asr}" VerticalTextAlignment="Center" 
                                   FontSize="{DynamicResource CaptionFontSize}"
                                   TextColor="{AppThemeBinding Light={StaticResource OnSurfaceColor}, Dark={StaticResource OnSurfaceColorDark}}"
                                   AutomationProperties.IsInAccessibleTree="True"
                                   SemanticProperties.Description="{Binding Asr}" />
                            <Label Grid.Column="6" FontAttributes="Bold" HorizontalTextAlignment="Center"
                                   Text="{Binding Maghrib}" VerticalTextAlignment="Center" 
                                   FontSize="{DynamicResource CaptionFontSize}"
                                   TextColor="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource Primary30}}"
                                   AutomationProperties.IsInAccessibleTree="True"
                                   SemanticProperties.Description="{Binding Maghrib}" />
                            <Label Grid.Column="7" HorizontalTextAlignment="Center"
                                   Text="{Binding Isha}" VerticalTextAlignment="Center" 
                                   FontSize="{DynamicResource CaptionFontSize}"
                                   TextColor="{AppThemeBinding Light={StaticResource OnSurfaceColor}, Dark={StaticResource OnSurfaceColorDark}}"
                                   AutomationProperties.IsInAccessibleTree="True"
                                   SemanticProperties.Description="{Binding Isha}" />
                            <Label Grid.Column="8" FontAttributes="Bold" HorizontalTextAlignment="Center"
                                   Text="{Binding EndOfIsha}" VerticalTextAlignment="Center" 
                                   FontSize="{DynamicResource CaptionFontSize}"
                                   TextColor="{AppThemeBinding Light={StaticResource PrimaryColor}, Dark={StaticResource Primary30}}"
                                   AutomationProperties.IsInAccessibleTree="True"
                                   SemanticProperties.Description="{Binding EndOfIsha}" />
                        </Grid>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </ScrollView>
</ContentView>