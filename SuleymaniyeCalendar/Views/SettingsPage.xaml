<?xml version="1.0" encoding="utf-8" ?>

<ContentPage
    x:Class="SuleymaniyeCalendar.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:behaviors="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:localization="clr-namespace:LocalizationResourceManager.Maui;assembly=LocalizationResourceManager.Maui"
    xmlns:models="clr-namespace:SuleymaniyeCalendar.Models"
    xmlns:viewModels="clr-namespace:SuleymaniyeCalendar.ViewModels"
    x:DataType="viewModels:SettingsViewModel"
    FlowDirection="{DynamicResource FlowDirection}">

    <ContentPage.Content>
        <ScrollView
            HorizontalOptions="Fill"
            Orientation="Vertical"
            VerticalOptions="Fill">
            <VerticalStackLayout Padding="18" Spacing="18">

                <!--  Language Selection  -->
                <Border Style="{StaticResource SettingsCard}">
                    <VerticalStackLayout Spacing="12">
                        <Label Style="{StaticResource TitleMediumLabel}" Text="{localization:Translate UygulamaDili}" />
                        <Picker
                            Title="{localization:Translate UygulamaDiliniSecin}"
                            BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceColor},
                                                              Dark={StaticResource SurfaceColorDark}}"
                            HorizontalOptions="Fill"
                            ItemDisplayBinding="{Binding Name}"
                            ItemsSource="{Binding SupportedLanguages}"
                            SelectedItem="{Binding SelectedLanguage}" />
                    </VerticalStackLayout>
                </Border>

                <!--  Theme Selection  -->
                <Border Style="{StaticResource SettingsCard}">
                    <VerticalStackLayout Spacing="16">
                        <Label Style="{StaticResource TitleMediumLabel}" Text="{localization:Translate UygulamaTema}" />

                        <VerticalStackLayout Spacing="12">
                            <RadioButton
                                Content="{localization:Translate AcikTema}"
                                GroupName="ThemeGroup"
                                IsChecked="{Binding LightChecked}" />
                            <RadioButton
                                Content="{localization:Translate KoyuTema}"
                                GroupName="ThemeGroup"
                                IsChecked="{Binding DarkChecked}" />
                            <RadioButton
                                Content="{localization:Translate SistemTemasi}"
                                GroupName="ThemeGroup"
                                IsChecked="{Binding SystemChecked}" />
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!--  Font Size  -->
                <Border Style="{StaticResource SettingsCard}">
                    <VerticalStackLayout Spacing="12">
                        <Label FontAttributes="Bold" Style="{StaticResource TitleMediumLabel}">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="{localization:Translate YaziBoyutu}" />
                                    <Span Text="{Binding FontSize}" />
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                        <Slider
                            AutomationProperties.IsInAccessibleTree="true"
                            HeightRequest="48"
                            HorizontalOptions="Fill"
                            Maximum="24"
                            MaximumTrackColor="{AppThemeBinding Light={StaticResource Gray600},
                                                                Dark={StaticResource Gray200}}"
                            Minimum="12"
                            MinimumTrackColor="{AppThemeBinding Light={StaticResource PrimaryColor},
                                                                Dark={StaticResource PrimaryAccent100Color}}"
                            SemanticProperties.Description="{localization:Translate YaziBoyutu}"
                            ThumbColor="{AppThemeBinding Light={StaticResource PrimaryColor},
                                                         Dark={StaticResource PrimaryAccent100Color}}"
                            Value="{Binding FontSize}" />
                    </VerticalStackLayout>
                </Border>

                <!--  Location Settings  -->
                <Border Style="{StaticResource SettingsCard}">
                    <Grid ColumnDefinitions="*,Auto">
                        <VerticalStackLayout Grid.Column="0" Spacing="4">
                            <Label
                                Style="{StaticResource TitleMediumLabel}"
                                Text="{localization:Translate KonumYenileButton}" />
                            <Label
                                MaxLines="3"
                                Style="{StaticResource BodyMediumLabel}"
                                Text="{localization:Translate HepKonumYenile}"
                                TextColor="{AppThemeBinding Light={StaticResource Gray950},
                                                            Dark={StaticResource Gray200}}" />
                        </VerticalStackLayout>
                        <Switch
                            Grid.Column="1"
                            IsToggled="{Binding AlwaysRenewLocationEnabled}"
                            OnColor="{AppThemeBinding Light={StaticResource PrimaryColor},
                                                      Dark={StaticResource PrimaryAccent100Color}}"
                            VerticalOptions="Center" />
                    </Grid>
                </Border>

        <!--  Android Notifications  -->
        <Border IsVisible="{OnPlatform Android=True, iOS=False}" Style="{StaticResource SettingsCard}">
                    <VerticalStackLayout Spacing="4">
                        <Label Style="{StaticResource TitleMediumLabel}" Text="{localization:Translate BildirimNamazVakitleri}" />

            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="1" IsVisible="{Binding ShowNotificationPrayerOption}">
                            <VerticalStackLayout Grid.Column="0" Spacing="4">
                                <Label Style="{StaticResource BodyMediumLabel}" Text="{localization:Translate BildirimNamazVakitleri}" />
                                <!--<Label Text="{localization:Translate BildirimNamazVakitleriUyari}"
                                       Style="{StaticResource BodyMediumLabel}"
                                       TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}"
                                       MaxLines="2" />-->
                            </VerticalStackLayout>
                            <Switch
                                Grid.Column="1"
                                IsToggled="{Binding NotificationPrayerTimesEnabled}"
                                OnColor="{AppThemeBinding Light={StaticResource PrimaryColor},
                                                          Dark={StaticResource PrimaryAccent100Color}}"
                                VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <!--  Android Foreground Service  -->
                <Border IsVisible="{OnPlatform Android=true, iOS=false}" Style="{StaticResource SettingsCard}">
                    <VerticalStackLayout Spacing="16">
                        <!--<Label Style="{StaticResource TitleLargeLabel}" Text="{localization:Translate EtkinlestirSwitch}" />-->

                        <Grid
                            ColumnDefinitions="*,Auto"
                            ColumnSpacing="16"
                            RowDefinitions="Auto">
                            <VerticalStackLayout Grid.Column="0" Spacing="4">
                                <Label
                                    Style="{StaticResource TitleMediumLabel}"
                                    Text="{localization:Translate BildirimKapatma}" />
                                <Label
                                    MaxLines="9"
                                    Style="{StaticResource BodyMediumLabel}"
                                    Text="{localization:Translate BildirimUyari}"
                                    TextColor="{AppThemeBinding Light={StaticResource Gray950},
                                                                Dark={StaticResource Gray200}}" />
                            </VerticalStackLayout>
                            <Switch
                                Grid.Column="1"
                                IsToggled="{Binding ForegroundServiceEnabled}"
                                OnColor="{AppThemeBinding Light={StaticResource PrimaryColor},
                                                          Dark={StaticResource PrimaryAccent100Color}}"
                                VerticalOptions="Center" />
                        </Grid>

                        <Button
                            Command="{Binding GotoSettingsCommand}"
                            Style="{StaticResource TonalButton}"
                            Text="{localization:Translate GotoSettings}" />
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </ContentPage.Content>

</ContentPage>