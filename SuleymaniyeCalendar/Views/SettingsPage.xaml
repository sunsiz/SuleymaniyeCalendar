<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SuleymaniyeCalendar.Views.SettingsPage"
             xmlns:localization="clr-namespace:LocalizationResourceManager.Maui;assembly=LocalizationResourceManager.Maui"
             xmlns:behaviors="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:viewModels="clr-namespace:SuleymaniyeCalendar.ViewModels"
             x:DataType="viewModels:SettingsViewModel">

    <ContentPage.Content>
        <ScrollView HorizontalOptions="FillAndExpand" VerticalOptions="Fill" Orientation="Vertical">
            <VerticalStackLayout Padding="12" Spacing="12">
                <!-- Language -->
                <Border Style="{StaticResource Card}">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="{localization:Translate UygulamaDili}" Style="{StaticResource CardInfoLabel}" />
                        <Picker ItemsSource="{Binding SupportedLanguages}"
                                ItemDisplayBinding="{Binding Name}"
                                SelectedItem="{Binding SelectedLanguage}"
                                Title="{localization:Translate UygulamaDiliniSecin}"
                                HorizontalOptions="Fill" />
                    </VerticalStackLayout>
                </Border>

                <!-- Theme -->
                <Border Style="{StaticResource Card}">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="{localization:Translate UygulamaTema}" Style="{StaticResource CardInfoLabel}" />
                        <VerticalStackLayout Spacing="4">
                            <RadioButton GroupName="ThemeGroup"
                                         Content="{localization:Translate AcikTema}"
                                         IsChecked="{Binding LightChecked}"
                                         AutomationProperties.IsInAccessibleTree="True"
                                         SemanticProperties.Description="{localization:Translate AcikTema}" />
                            <RadioButton GroupName="ThemeGroup"
                                         Content="{localization:Translate KoyuTema}"
                                         IsChecked="{Binding DarkChecked}"
                                         AutomationProperties.IsInAccessibleTree="True"
                                         SemanticProperties.Description="{localization:Translate KoyuTema}" />
                            <RadioButton GroupName="ThemeGroup"
                                         Content="{localization:Translate SistemTemasi}"
                                         IsChecked="{Binding SystemChecked}"
                                         AutomationProperties.IsInAccessibleTree="True"
                                         SemanticProperties.Description="{localization:Translate SistemTemasi}" />
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Font size -->
                <Border Style="{StaticResource Card}">
                    <VerticalStackLayout Spacing="8">
                        <Label x:Name="LabelFontSize" Style="{StaticResource CardInfoLabel}">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="{localization:Translate YaziBoyutu}" />
                                    <Span Text=" "/>
                                    <Span Text="{Binding FontSize}" />
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                        <Slider HorizontalOptions="FillAndExpand" HeightRequest="48"
                                Maximum="24" Minimum="12" Value="{Binding FontSize}"
                                AutomationProperties.IsInAccessibleTree="true"
                                SemanticProperties.Description="{localization:Translate YaziBoyutu}" />
                    </VerticalStackLayout>
                </Border>

                <!-- Location refresh -->
                <Border Style="{StaticResource Card}">
                    <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto" ColumnSpacing="8">
                        <Label Grid.Column="0" Text="{localization:Translate HepKonumYenile}" Style="{StaticResource LabelStyle}" VerticalTextAlignment="Center" />
                        <Switch Grid.Column="1" IsToggled="{Binding AlwaysRenewLocationEnabled}" />
                    </Grid>
                </Border>

                <!-- Android only: notifications master toggle -->
                <Border Style="{StaticResource Card}" IsVisible="{OnPlatform Android=True, iOS=False}">
                    <VerticalStackLayout Spacing="6">
                        <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto" ColumnSpacing="8">
                            <Label Grid.Column="0" Text="{localization:Translate BildirimNamazVakitleri}" Style="{StaticResource LabelStyle}" VerticalTextAlignment="Center" />
                            <Switch Grid.Column="1" IsToggled="{Binding NotificationPrayerTimesEnabled}" />
                        </Grid>
                        <Label Text="{localization:Translate BildirimNamazVakitleriUyari}" FontSize="Small" />
                    </VerticalStackLayout>
                </Border>

                <!-- Android only: sticky notifications and system settings link -->
                <Border Style="{StaticResource Card}" IsVisible="{OnPlatform Android=true, iOS=false}">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="{localization:Translate BildirimKapatma}" Style="{StaticResource LabelStyle}" />
                        <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto" ColumnSpacing="8">
                            <Label Grid.Column="0" Text="{localization:Translate EtkinlestirSwitch}" VerticalTextAlignment="Center" />
                            <Switch Grid.Column="1" IsToggled="{Binding ForegroundServiceEnabled}" />
                        </Grid>
                        <Label Text="{localization:Translate BildirimUyari}" FontSize="Small" />
                        <Button Text="{localization:Translate GotoSettings}" Command="{Binding GotoSettingsCommand}" Style="{DynamicResource TonalButton}" />
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </ContentPage.Content>

</ContentPage>